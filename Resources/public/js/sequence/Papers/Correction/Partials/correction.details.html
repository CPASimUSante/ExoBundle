<div class="row">
    <div class="col-md-12">
        <!-- specific navigation row -->
        <div class="row">
            <div class="col-md-12">
                <div class="btn-group" role="group">
                    <a class="btn btn-default" data-ng-href="{{correctionCtrl.generateUrl('exercise-home', correctionCtrl.sequence.id)}}">{{ 'link_exercice_home'|trans:{}:'ujm_sequence' }}</a>
                    <a class="btn btn-default" data-ng-href="#/{{correctionCtrl.sequence.id}}">{{ 'paper_list'|trans:{}:'ujm_sequence' }}</a>
                </div>                
                <a data-ng-if="correctionCtrl.displayRetryExerciseLink" class="btn btn-default pull-right" data-ng-href="{{correctionCtrl.generateUrl('exercise-play', correctionCtrl.sequence.id)}}">
                    <i class="fa fa-check-square-o"> {{ 'link_exercise_retry'|trans:{}:'ujm_sequence' }}</i>
                </a>
            </div>
        </div>
        <hr/>
        <!-- Score row -->
        <div class="row">
            <div class="col-md-12">
                <div class="pull-right center-text" style="border:1px solid #aaa; border-radius: 2px; padding: 5px;"><strong>{{ 'paper_details_paper_score'|trans:{}:'ujm_sequence' }} : {{correctionCtrl.globalNote}} / 20 </strong></div>
                <!--
                <div class="alert" data-ng-class="{'alert-danger' : paperCtrl.globalNote < 5 , 'alert-warning' : (paperCtrl.globalNote < 10 && paperCtrl.globalNote >= 5), 'alert-info' : (paperCtrl.globalNote >= 10 && paperCtrl.globalNote < 15), 'alert-success' : paperCtrl.globalNote >= 15 }"><strong>{{ 'label_exercise_score'|trans:{}:'ujm_sequence' }} : {{paperCtrl.globalNote}} / 20 </strong></div>
                -->
            </div>
        </div>
        <hr/>
        <!-- question list row -->
        <div class="row" >
            <div class="col-md-12">
                <!-- One question -->
                <div data-ng-repeat="question in correctionCtrl.questions" id="question-{{question.id}}" class="panel panel-default">
                    <div class="panel-heading clearfix">
                        <h4 class="panel-title pull-left">
                            <span>{{question.title}}</span>
                            <!--
                            - {{ 'paper_details_question_score'|trans:{}:'ujm_sequence' }} : {{paperCtrl.getQuestionScore(question)}}
                            -->
                        </h4>
                        <a class="btn btn-default pull-right fa fa-chevron-down" id="question-toggle-{{question.id}}" data-ng-click="correctionCtrl.toggleDetails(question.id)"></a>
                    </div>
                    <div id="question-body-{{question.id}}">
                        <div class="panel-body">                             
                            <!-- description -->
                            <div class="row">
                                <div class="col-md-12">
                                    <div data-ng-bind-html="question.description | unsafe"></div>
                                </div>
                                <hr/>
                            </div>  
                            <!-- invite -->
                            <div class="row">
                                <div class="col-md-12">
                                    <h5 data-ng-bind-html="question.invite | unsafe"></h5>
                                </div>
                                <hr/>
                            </div>                         
                            <!-- used hints -->
                            <div data-ng-if="question.hints.length > 0 && correctionCtrl.oneOrMoreHintsAreUsed(question)" class="row">
                                <div class="col-md-12">
                                    <div data-ng-repeat="hint in question.hints">
                                        <h5 data-ng-if="correctionCtrl.hintIsUsed(question, hint)">{{hint.text}} - {{hint.penalty}}</h5>                                        
                                    </div>
                                </div>
                                <hr/>
                            </div>
                            <!-- QUESTION SCORE ROW ?? -->
                            <!-- for choice question only ? use a directive ? -->
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="center-text">{{ 'paper_details_table_choice'|trans:{}:'ujm_sequence' }}</th>
                                        <th class="center-text">{{ 'paper_details_table_expected_answer'|trans:{}:'ujm_sequence' }}</th>
                                        <th class="center-text">{{ 'paper_details_table_your_answer'|trans:{}:'ujm_sequence' }}</th>
                                        <th class="center-text">{{ 'paper_details_table_comment'|trans:{}:'ujm_sequence' }}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-ng-repeat="choice in question.choices">
                                        <td class="center-text">
                                            <img class="image" data-ng-if="correctionCtrl.getChoiceSimpleType(choice) == 'encoded-image'" data-ng-src="data:{{choice.type}};{{choice.encoding}}, {{choice.data}}"/>
                                            <img class="image" data-ng-if="correctionCtrl.getChoiceSimpleType(choice) == 'web-image'" data-ng-src="{{choice.url}}"/>
                                            <div data-ng-if="correctionCtrl.getChoiceSimpleType(choice) == 'simple-text'">{{choice.data}}</div>
                                            <div data-ng-if="correctionCtrl.getChoiceSimpleType(choice) == 'html-text'" data-ng-bind-html="choice.data | unsafe"></div>
                                        </td>
                                        <td class="center-text">
                                            <div class="fa" data-ng-class="correctionCtrl.isChoiceValid(question, choice) ? 'fa-check':'fa-remove'"></div>
                                        </td>
                                        <td class="center-text">
                                            <div class="fa" data-ng-class="correctionCtrl.isStudentChoice(question, choice) ? 'fa-check':'fa-remove'"></div>
                                        </td>
                                        <td class="center-text">
                                            <span>{{correctionCtrl.getCurrentChoiceFeedBack(question, choice)}}</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <!-- global feedback -->
                            <div data-ng-if="question.feedback !== '' && question.feedback !== undefined" class="row">                                
                                <hr/>
                                <div class="col-md-12">
                                    <h5 data-ng-bind-html="question.feedback | unsafe"></h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


